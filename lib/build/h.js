module.exports=function(t,n,e){function r(){"use strict"}return r.readConfig=function(){"use strict";return new e.v.Promise(function(n){var e=atom.project.path+"/.atom-hack";t.exists(e,function(i){return i?void t.readFile(e,function(t,e){try{e=JSON.parse(e.toString())}catch(i){return alert("Invalid Configuration, Parse Error: "+i.message)&&n()}var o=this.defaultConfig;for(var s in e)e.hasOwnProperty(s)&&(o[s]=e[s]);r.config=o,n()}.bind(this)):n()}.bind(this))}.bind(this))},r.spawn=function(){"use strict";return this.exec([],null,atom.project.path)},r.exec=function(t,n,r){"use strict";var i={stderr:"",stdout:""},o=atom.config.get("Atom-Hack.typeCheckerCommand");return new e.v.Promise(function(s){var c=e.v.CP.spawn(o,t,{cwd:e.v.Path.dirname(r)});n&&n.length&&c.stdin.write(n),c.stdin.end(),c.stdout.on("data",function(t){i.stdout+=t}),c.stderr.on("data",function(t){i.stderr+=t}),c.on("exit",function(){s(i)})})},r.execSync=function(t,n,r){"use strict";var i=atom.config.get("Atom-Hack.typeCheckerCommand");return new e.v.Promise(function(o){var s=e.v.CP.spawnSync(i,t,{cwd:e.v.Path.dirname(r),input:n});o({stderr:s.stderr.toString(),stdout:s.stdout.toString()})},!1)},r.ACSuggestions=function(t){"use strict";return new e.v.Promise(function(n){var e=t.getBuffer(),r=e.cachedText,i=e.characterIndexForPosition(t.getCursorBufferPosition()),o=this.ACTerm(r,i);r=r.substr(0,i)+"AUTO332"+r.substr(i),this.execSync(["--auto-complete"],r,t.getPath()).then(function(t){t=t.stdout.split("\n").filter(function(t){return t}),n(this.ACProcess(o,t))}.bind(this))}.bind(this),!1)},r.ACTerm=function(t,n){"use strict";for(var e=[],i=null;(n-=1)&&(i=t.substr(n,1),-1===r.LeTerms.indexOf(i));)e.push(i);return e.reverse().join("").trim()},r.ACProcess=function(t,n){"use strict";var e=[];return t&&t.length?(n.forEach(function(n){n=n.split(" "),e.push({term:n[0],label:n.slice(1).join(" "),score:n[0].score(t)})}),e.sort(function(t,n){return n.score-t.score})):n.forEach(function(t){t=t.split(" "),e.push({term:t[0],label:t.slice(1).join(" ")})}),{Results:e,Term:t}},r.defaultConfig={type:"local"},r.config=r.defaultConfig,r.LeTerms=['"',"'"," ",")","(",",","{","}","::","$","-","+",">","<",";","\n","\r"],r};